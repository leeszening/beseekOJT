<!DOCTYPE html>
<html>
    <head>
        {%metas%}
        <title>{%title%}</title>
        {%favicon%}
        {%css%}
</head>
<body>
    {%app_entry%}
    <footer>
        {%config%}
        {%scripts%}
        {%renderer%}
    </footer>
    <script>
        fetch('/api/maps-config')
            .then(response => response.json())
            .then(data => {
                if (data.apiKey && data.mapId) {
                    window.GOOGLE_MAP_ID = data.mapId; // Store mapId globally
                    const script = document.createElement('script');
                    script.src = `https://maps.googleapis.com/maps/api/js?key=${data.apiKey}&libraries=places,marker`;
                    script.id = 'google-maps-script';
                    script.async = true;
                    script.defer = true;
                    document.head.appendChild(script);
                }
            });
    </script>
</body>
</html>
